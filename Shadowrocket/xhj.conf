# é…ç½®åç§°ï¼šå°ç«ç®­æ‡’äººé…ç½®
# é…ç½®ä½œè€…: å¸å°‘
# æ›´æ–°æ—¶é—´ï¼š2024-02-11
# åé¦ˆé‚®ç®±ï¼šdishao@msn.com
# æ›´æ–°åœ°å€ï¼šhttps://github.com/dishao123/rules_script
# TG é¢‘é“ï¼šhttps://t.me/dishao_channel
# TG ç¾¤ç»„ï¼šhttps://t.me/dishao_chat

# Shadowrocket æ·»åŠ é…ç½®æ–¹æ³•ï¼šé…ç½® - å³ä¸Šè§’â• - ç²˜è´´é…ç½®é“¾æ¥ - ä¸‹è½½ - ç‚¹å‡»å¯¹åº”çš„é…ç½®æ–‡ä»¶ - ä½¿ç”¨é…ç½®ã€‚
[General]
# Shadowrocket å¿«é€Ÿä½¿ç”¨æ–¹æ³•ï¼š
# 1.é¦–é¡µ - æ·»åŠ èŠ‚ç‚¹ã€‚
# 2.è®¾ç½® - å»¶è¿Ÿæµ‹è¯•æ–¹æ³•ï¼Œé€‰æ‹© CONNECTã€‚
# 3.é¦–é¡µ - è¿é€šæ€§æµ‹è¯•ï¼Œé€‰æ‹©å¯ç”¨èŠ‚ç‚¹è¿æ¥ã€‚
# ----------
# æ·»åŠ /æ›´æ–°è®¢é˜…é“¾æ¥æ—¶å¼‚å¸¸åŸå› ï¼š
# "forbidden" è¡¨ç¤ºè®¢é˜…è¢«é‡ç½®æˆ–ä»¤ç‰Œ(token)é”™è¯¯ã€‚
# "not found" è¡¨ç¤ºè·¯å¾„ä¿¡æ¯é”™è¯¯ã€‚
# "service unavailable" è¡¨ç¤ºåŸŸåä¿¡æ¯é”™è¯¯æˆ–åŸŸåè¢«è¿è¥å•†å±è”½ã€‚
# å¦‚æœæç¤º â€œå‘ç”Ÿäº†SSLé”™è¯¯ï¼Œæ— æ³•å»ºç«‹ä¸è¯¥æœåŠ¡å™¨çš„å®‰å…¨è¿æ¥â€ï¼Œå¯ä»¥å°è¯•çš„è§£å†³æ–¹æ³•ï¼š
# 1.å…¨å±€è·¯ç”±é€‰ä»£ç†ï¼Œä½¿ç”¨å¦å¤–ä¸€ä¸ªèŠ‚ç‚¹æ¥æ·»åŠ /æ›´æ–°è®¢é˜…é“¾æ¥ã€‚
# 2.åˆ‡æ¢ç½‘ç»œåå†æ·»åŠ /æ›´æ–°è®¢é˜…é“¾æ¥ã€‚
# 3.æ£€æŸ¥è®¢é˜…é“¾æ¥æ˜¯å¦é”™è¯¯æˆ–å¤±æ•ˆã€‚
# ----------
# Shadowrocket æ‰“å¼€ HTTPS è§£å¯†æ–¹æ³•ï¼š
# 1.ç‚¹å‡»é…ç½®æ–‡ä»¶â“˜ - HTTPS è§£å¯† - è¯ä¹¦ - ç”Ÿæˆæ–°çš„ CA è¯ä¹¦ - å®‰è£…è¯ä¹¦ã€‚
# 2.æ‰‹æœºè®¾ç½® - å·²ä¸‹è½½æè¿°æ–‡ä»¶ - å®‰è£…ã€‚
# 3.æ‰‹æœºè®¾ç½® - é€šç”¨ - å…³äºæœ¬æœº - è¯ä¹¦ä¿¡ä»»è®¾ç½® - å¼€å¯å¯¹åº” Shadowrocket è¯ä¹¦ä¿¡ä»»ã€‚
# ----------
# æ—è·¯ç³»ç»Ÿã€‚å¦‚æœç¦ç”¨æ­¤é€‰é¡¹ï¼Œå¯èƒ½ä¼šå¯¼è‡´ä¸€äº›ç³»ç»Ÿé—®é¢˜ï¼Œå¦‚æ¨é€é€šçŸ¥å»¶è¿Ÿã€‚
bypass-system = true
# è·³è¿‡ä»£ç†ã€‚æ­¤é€‰é¡¹å¼ºåˆ¶è¿™äº›åŸŸåæˆ– IP çš„è¿æ¥èŒƒå›´ç”± Shadowrocket TUN æ¥å£æ¥å¤„ç†ï¼Œè€Œä¸æ˜¯ Shadowrocket ä»£ç†æœåŠ¡å™¨ã€‚æ­¤é€‰é¡¹ç”¨äºè§£å†³ä¸€äº›åº”ç”¨ç¨‹åºçš„ä¸€äº›å…¼å®¹æ€§é—®é¢˜ã€‚
skip-proxy = 10.0.0.0/8, 100.64.0.0/10, 127.0.0.0/8, 127.0.0.1/32, 169.254.0.0/16, 172.16.0.0/12, 185.60.112.157/32, 185.60.112.158/32, 182.162.132.1/32, 192.0.0.0/24, 192.0.2.0/24, 192.88.99.0/24, 192.168.0.0/16, 192.168.122.1/32, 193.168.0.1/32, 198.51.100.0/24, 24.105.30.129/32, 203.0.113.0/24, 224.0.0.0/4, 239.255.255.250/32, 255.255.255.255/32, ::1/128, fe80::/10, localhost, *.local, captive.apple.com, *.ccb.com, *.abchina.com.cn, *.psbc.com, www.baidu.com, e.crashlytics.com, passenger.t3go.cn, wxh.wo.cn, gate.lagou.com
# TUN æ—è·¯è·¯ç”±ã€‚Shadowrocket TUN æ¥å£åªèƒ½å¤„ç† TCP åè®®ã€‚ä½¿ç”¨æ­¤é€‰é¡¹å¯ä»¥ç»•è¿‡æŒ‡å®šçš„ IP èŒƒå›´ï¼Œè®©å…¶ä»–åè®®é€šè¿‡ã€‚
tun-excluded-routes = 10.0.0.0/8, 100.64.0.0/10, 127.0.0.0/8, 169.254.0.0/16, 172.16.0.0/12, 192.0.0.0/24, 192.0.2.0/24, 192.88.99.0/24, 192.168.0.0/16, 198.51.100.0/24, 203.0.113.0/24, 224.0.0.0/4, 255.255.255.255/32, 239.255.255.250/32
# DNS è¦†å†™ã€‚ä½¿ç”¨æ™®é€š DNS æˆ–åŠ å¯† DNSï¼ˆå¦‚ DoHã€DoQã€DoT ç­‰ï¼‰è¦†ç›–é»˜è®¤çš„ç³»ç»Ÿ DNSã€‚æœ‰äº› DNS over HTTPS æ”¯æŒ HTTP3ï¼Œæ‰€ä»¥å°è¯•æŸ¥è¯¢ï¼Œå¦‚æœæ”¯æŒå°±åˆ‡æ¢åˆ° HTTP3ï¼Œå¯åœ¨ DoH é“¾æ¥åé¢åŠ ä¸Š #no-h3 å…³é—­ã€‚DoH å¼ºåˆ¶é€šè¿‡ H3 æŸ¥è¯¢çš„å†™æ³•æ˜¯å°† â€œhttpsâ€ æ”¹æˆ â€œh3â€ï¼Œå¦‚ h3://dns.alidns.com/dns-queryã€‚
dns-server = https://doh.pub/dns-query, https://dns.alidns.com/dns-query, 114.114.114.114, 119.29.29.29, 119.28.28.28, 223.5.5.5, 223.6.6.6, 1.1.1.1, 1.0.0.1, 8.8.8.8, 8.8.4.4
# å¤‡ç”¨ DNSã€‚å½“è¦†å†™ DNS æŸ¥è¯¢å¤±è´¥æˆ–æŸ¥è¯¢æ—¶é—´è¶…è¿‡2ç§’ï¼ŒShadowrocket ä¼šè‡ªåŠ¨å›é€€å¤‡ç”¨ DNSã€‚å¦‚éœ€æŒ‡å®šå¤šä¸ª DNSï¼Œå¯ç”¨é€—å·åˆ†éš”ã€‚system è¡¨ç¤ºå›é€€åˆ°ç³»ç»Ÿ DNSã€‚
fallback-dns-server = system
# å¯ç”¨ IPv6 æ”¯æŒã€‚false è¡¨ç¤ºä¸å¯ç”¨ï¼Œtrue è¡¨ç¤ºå¯ç”¨ã€‚ï¼ˆæ³¨ï¼šå³ä½¿ä¸å¯ç”¨æ­¤é€‰é¡¹ï¼Œå½“æœ¬åœ°ç½‘ç»œç¯å¢ƒæ”¯æŒ IPv6ï¼Œå¹¶ä¸”èŠ‚ç‚¹åŸŸåæ”¯æŒ IPv6 è§£æï¼ŒShadowrocket ä¹Ÿä¼šä½¿ç”¨èŠ‚ç‚¹çš„ IPv6 åœ°å€è¿›è¡Œè®¿é—®ã€‚è§£å†³æ–¹æ³•æ˜¯å…³é—­èŠ‚ç‚¹åŸŸåçš„ IPv6 è§£æï¼Œæˆ–è€…åœ¨é…ç½®æ–‡ä»¶çš„ [Host] é¡¹ç›®ä¸‹ä¸ºèŠ‚ç‚¹åŸŸåæŒ‡å®š IP åœ°å€ã€‚ï¼‰
ipv6 = false
# é¦–é€‰ IPv6ã€‚ä¼˜å…ˆå‘ IPv6 çš„ DNS æœåŠ¡å™¨æŸ¥è¯¢ AAAA è®°å½•ï¼Œä¼˜å…ˆä½¿ç”¨ AAAA è®°å½•ã€‚false è¡¨ç¤ºä¸å¯ç”¨ã€‚
prefer-ipv6 = false
# ç›´è¿çš„åŸŸåç±»è§„åˆ™ä½¿ç”¨ç³»ç»Ÿ DNS è¿›è¡ŒæŸ¥è¯¢ã€‚false è¡¨ç¤ºä¸å¯ç”¨ã€‚
dns-direct-system = false
# PING æ•°æ®åŒ…è‡ªåŠ¨å›å¤ã€‚
icmp-auto-reply = true
# ä¸å¼€å¯æ—¶ï¼Œã€Œé‡å†™çš„ REJECT ç­–ç•¥ã€é»˜è®¤åªæœ‰åœ¨é…ç½®æ¨¡å¼ä¸‹ç”Ÿæ•ˆã€‚å¼€å¯åï¼Œå¯ä»¥ä»¤è¯¥ç­–ç•¥åœ¨å…¶ä»–å…¨å±€è·¯ç”±æ¨¡å¼ä¸‹éƒ½ç”Ÿæ•ˆã€‚
always-reject-url-rewrite = false
# ç§æœ‰ IP åº”ç­”ã€‚å¦‚æœä¸å¯ç”¨è¯¥é€‰é¡¹ï¼ŒåŸŸåè§£æè¿”å›ç§æœ‰ IPï¼ŒShadowrocket ä¼šè®¤ä¸ºè¯¥åŸŸåè¢«åŠ«æŒè€Œå¼ºåˆ¶ä½¿ç”¨ä»£ç†ã€‚
private-ip-answer = true
# ç›´è¿åŸŸåè§£æå¤±è´¥åä½¿ç”¨ä»£ç†ã€‚false è¡¨ç¤ºä¸å¯ç”¨ã€‚
dns-direct-fallback-proxy = false
# TUN åŒ…å«è·¯ç”±ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒShadowrocket æ¥å£ä¼šå£°æ˜è‡ªå·±ä¸ºé»˜è®¤è·¯ç”±ï¼Œä½†ç”±äº Wi-Fi æ¥å£çš„è·¯ç”±è¾ƒå°ï¼Œæœ‰äº›æµé‡å¯èƒ½ä¸ä¼šé€šè¿‡ Shadowrocket æ¥å£ã€‚ä½¿ç”¨æ­¤é€‰é¡¹å¯ä»¥æ·»åŠ ä¸€ä¸ªè¾ƒå°çš„è·¯ç”±è¡¨ã€‚
tun-included-routes = 
# æ€»æ˜¯çœŸå® IPã€‚è¿™ä¸ªé€‰é¡¹è¦æ±‚ Shadowrocket åœ¨ TUN å¤„ç† DNS è¯·æ±‚æ—¶è¿”å›ä¸€ä¸ªçœŸå®çš„ IP åœ°å€è€Œä¸æ˜¯å‡çš„ IP åœ°å€ã€‚
always-real-ip = *.lan, *.direct, cable.auth.com, *.msftconnecttest.com, *.msftncsi.com, network-test.debian.org, detectportal.firefox.com, resolver1.opendns.com, *.srv.nintendo.net, *.stun.playstation.net, xbox.*.microsoft.com, *.xboxlive.com, stun.*, global.turn.twilio.com, global.stun.twilio.com, app.yinxiang.com, injections.adguard.org, local.adguard.org, cable.auth.com, localhost.*.qq.com, localhost.*.weixin.qq.com, *.logon.battlenet.com.cn, *.logon.battle.net, *.blzstatic.cn, music.163.com, *.music.163.com, *.126.net, musicapi.taihe.com, music.taihe.com, songsearch.kugou.com, trackercdn.kugou.com, *.kuwo.cn, api-jooxtt.sanook.com, api.joox.com, joox.com, y.qq.com, *.y.qq.com, streamoc.music.tc.qq.com, mobileoc.music.tc.qq.com, isure.stream.qqmusic.qq.com, dl.stream.qqmusic.qq.com, aqqmusic.tc.qq.com, amobile.music.tc.qq.com, *.xiami.com, *.music.migu.cn, music.migu.cn, proxy.golang.org, *.mcdn.bilivideo.cn, *.cmpassport.com, id6.me, open.e.189.cn, mdn.open.wo.cn, opencloud.wostore.cn, auth.wosms.cn, *.jegotrip.com.cn, *.icitymobile.mobi, *.pingan.com.cn, *.cmbchina.com, pool.ntp.org, *.pool.ntp.org, ntp.*.com, time.*.com, ntp?.*.com, time?.*.com, time.*.gov, time.*.edu.cn, *.ntp.org.cn, PDC._msDCS.*.*, DC._msDCS.*.*, GC._msDCS.*.*
# DNS åŠ«æŒã€‚æœ‰äº›è®¾å¤‡æˆ–è½¯ä»¶æ€»æ˜¯ä½¿ç”¨ç¡¬ç¼–ç çš„ DNS æœåŠ¡å™¨ï¼Œä¾‹å¦‚ Netflix é€šè¿‡ Google DNS (8.8.8.8 æˆ– 8.8.4.4) å‘é€è¯·æ±‚ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨æ­¤é€‰é¡¹æ¥åŠ«æŒæŸ¥è¯¢ã€‚
hijack-dns = 8.8.8.8:53, 8.8.4.4:53
# å½“ UDP æµé‡åŒ¹é…åˆ°è§„åˆ™é‡Œä¸æ”¯æŒ UDP è½¬å‘çš„èŠ‚ç‚¹ç­–ç•¥æ—¶é‡æ–°é€‰æ‹©å›é€€è¡Œä¸ºï¼Œå¯é€‰è¡Œä¸ºåŒ…æ‹¬ DIRECTã€REJECTã€‚DIRECT è¡¨ç¤ºç›´è¿è½¬å‘ UDP æµé‡ï¼ŒREJECT è¡¨ç¤ºæ‹’ç»è½¬å‘ UDP æµé‡ã€‚
udp-policy-not-supported-behaviour = REJECT
# åŒ…å«é…ç½®ã€‚å¦‚ â€œinclude=a.confâ€ è¡¨ç¤ºå½“å‰é…ç½®åŒ…å«å¦ä¸€ä¸ªé…ç½® a.conf çš„å†…å®¹ï¼Œå½“å‰é…ç½®çš„ä¼˜å…ˆçº§é«˜äº a.confã€‚è¯¥é€‰é¡¹æ˜¯å¯¹é…ç½®å»ºç«‹åŒ…å«å…³ç³»ï¼Œä»¥æ»¡è¶³åŒæ—¶ä½¿ç”¨å¤šä¸ªé…ç½®çš„éœ€æ±‚ã€‚
include = 
# æ­¤é€‰é¡¹å…è®¸è¿”å›ä¸€ä¸ªè™šå‡çš„ IP åœ°å€ï¼Œå¦‚ â€œstun-response-ip=1.1.1.1â€ã€â€œstun-response-ipv6=::1â€ï¼Œç›®çš„æ˜¯é˜²æ­¢çœŸå® IP åœ°å€æ³„æ¼ï¼Œæé«˜ WebRTC çš„éšç§å’Œå®‰å…¨æ€§ã€‚
stun-response-ip=
stun-response-ipv6=
[Proxy]
# æ·»åŠ æœ¬åœ°èŠ‚ç‚¹ã€‚è¯¥é¡¹ç›®çš„èŠ‚ç‚¹è§£ææ˜¯ä¸ºäº†å…¼å®¹éƒ¨åˆ†é…ç½®æ–‡ä»¶ï¼Œä¸èƒ½å½“ä½œ Shadowrocket æ·»åŠ èŠ‚ç‚¹çš„ä¼˜å…ˆé€‰æ‹©ã€‚
# Shadowsocks ç±»å‹ï¼š
# èŠ‚ç‚¹åç§°=ss,åœ°å€,ç«¯å£,password=å¯†ç ,å…¶ä»–å‚æ•°(å¦‚method=aes-256-cfb,obfs=websocket,plugin=none)
# Vmess ç±»å‹ï¼š
# èŠ‚ç‚¹åç§°=vmess,åœ°å€,ç«¯å£,password=å¯†ç ,å…¶ä»–å‚æ•°(å¦‚alterId=0,method=auto,obfs=websocket,tfo=1)
# VLESS ç±»å‹ï¼š
# èŠ‚ç‚¹åç§°=vless,åœ°å€,ç«¯å£,password=å¯†ç ,tls=true,å…¶ä»–å‚æ•°(å¦‚obfs=websocket,peer=example.com)
# HTTP/HTTPS/Socks5/Socks5 Over TLS ç­‰ç±»å‹ï¼š
# èŠ‚ç‚¹åç§°=http,åœ°å€,ç«¯å£,ç”¨æˆ·,å¯†ç 
# èŠ‚ç‚¹åç§°=https,åœ°å€,ç«¯å£,ç”¨æˆ·,å¯†ç 
# èŠ‚ç‚¹åç§°=socks5,åœ°å€,ç«¯å£,ç”¨æˆ·,å¯†ç 
# èŠ‚ç‚¹åç§°=socks5-tls,åœ°å€,ç«¯å£,ç”¨æˆ·,å¯†ç ,skip-common-name-verify=true
# Trojan ç±»å‹ï¼š
# èŠ‚ç‚¹åç§°=trojan,åœ°å€,ç«¯å£,password=å¯†ç ,å…¶ä»–å‚æ•°(å¦‚allowInsecure=1,peer=example.com)
# Hysteria ç±»å‹ï¼š
# èŠ‚ç‚¹åç§°=hysteria,åœ°å€,ç«¯å£,auth=å¯†ç ,obfsParam=æ··æ·†,protocol=åè®®,udp=1,å…¶ä»–å‚æ•°(å¦‚peer=example.com,alpn=h2,upmbps=100,downmbps=100)
# Hysteria2 ç±»å‹ï¼š
# èŠ‚ç‚¹åç§°=hysteria2,åœ°å€,ç«¯å£,auth=å¯†ç ,obfsParam=æ··æ·†,udp=1,å…¶ä»–å‚æ•°(å¦‚peer=example.com,alpn=h3)
# TUIC ç±»å‹ï¼š
# èŠ‚ç‚¹åç§°=tuic,åœ°å€,ç«¯å£,password=å¯†ç ,udp=1,å…¶ä»–å‚æ•°(å¦‚user=uuidå€¼,peer=example.com,alpn=h2)
# Juicity ç±»å‹ï¼š
# èŠ‚ç‚¹åç§°=juicity,åœ°å€,ç«¯å£,password=å¯†ç ,udp=1,å…¶ä»–å‚æ•°(å¦‚user=uuidå€¼,peer=example.com,alpn=h2)
# WireGuard ç±»å‹ï¼š
# èŠ‚ç‚¹åç§°=wireguard,åœ°å€,ç«¯å£,privateKey=ç§é’¥,publicKey=å…¬é’¥,ip=å­ç½‘IP,udp=1,å…¶ä»–å‚æ•°(å¦‚dns=1.1.1.1,mtu=1350,keepalive=40,reserved=1/2/3)
# Snell ç±»å‹ï¼š
# èŠ‚ç‚¹åç§°=snell,åœ°å€,ç«¯å£,password=å¯†ç ,udp=1,å…¶ä»–å‚æ•°(å¦‚obfs=http,obfs-host=example.com,obfs-uri=/abc)

[Proxy Group]
# ä»£ç†åˆ†ç»„ç±»å‹ï¼š
# selectï¼šæ‰‹åŠ¨åˆ‡æ¢èŠ‚ç‚¹ã€‚
# url-testï¼šè‡ªåŠ¨åˆ‡æ¢å»¶è¿Ÿæœ€ä½èŠ‚ç‚¹ã€‚
# fallbackï¼šèŠ‚ç‚¹æŒ‚æ‰æ—¶è‡ªåŠ¨åˆ‡æ¢å…¶ä»–å¯ç”¨èŠ‚ç‚¹ã€‚
# load-balanceï¼šä¸åŒè§„åˆ™çš„è¯·æ±‚ä½¿ç”¨åˆ†ç»„é‡Œçš„ä¸åŒèŠ‚ç‚¹è¿›è¡Œè¿æ¥ã€‚
# randomï¼šéšæœºä½¿ç”¨åˆ†ç»„é‡Œçš„ä¸åŒèŠ‚ç‚¹è¿›è¡Œè¿æ¥ã€‚
# ----------
# policy-regex-filter è¡¨ç¤ºæ­£åˆ™å¼æˆ–å…³é”®è¯ç­›é€‰ï¼Œå¸¸ç”¨å†™æ³•ï¼š
# ä¿ç•™èŠ‚ç‚¹åç§°å«æœ‰å…³é”®è¯ A å’Œ B çš„èŠ‚ç‚¹:
# (?=.*(A))^(?=.*(B))^.*$
# ä¿ç•™èŠ‚ç‚¹åç§°å«æœ‰å…³é”®è¯ A æˆ– B çš„èŠ‚ç‚¹:
# A|B
# æ’é™¤èŠ‚ç‚¹åç§°å«æœ‰å…³é”®è¯ A æˆ– B çš„èŠ‚ç‚¹:
# ^((?!(A|B)).)*$
# ä¿ç•™èŠ‚ç‚¹åç§°å«æœ‰å…³é”®è¯ A å¹¶æ’é™¤å«æœ‰å…³é”®è¯ B çš„èŠ‚ç‚¹:
# (?=.*(A).)^((?!(B)).)*$
# ----------
# ä»£ç†åˆ†ç»„å…¶ä»–è®¾ç½®å‚æ•°ï¼š
# intervalï¼šæŒ‡å®šé—´éš”å¤šé•¿æ—¶é—´åéœ€è¦é‡æ–°å‘èµ·æµ‹è¯•ã€‚
# timeoutï¼šå¦‚æœæµ‹è¯•åœ¨è¶…æ—¶å‰æœªå®Œæˆï¼Œæ”¾å¼ƒæµ‹è¯•ã€‚
# toleranceï¼šåªæœ‰å½“æ–°ä¼˜èƒœè€…çš„åˆ†æ•°é«˜äºæ—§ä¼˜èƒœè€…çš„åˆ†æ•°åŠ ä¸Šå…¬å·®æ—¶ï¼Œæ‰ä¼šè¿›è¡Œçº¿è·¯æ›´æ¢ã€‚
# urlï¼šæŒ‡å®šè¦æµ‹è¯•çš„ URLã€‚
# ----------
# ä¸å«æ­£åˆ™ç­›é€‰çš„ä»£ç†åˆ†ç»„ï¼Œç¤ºä¾‹ï¼š
# åç§°=ç±»å‹ (å¦‚select,url-test,fallback,load-balance,random),ç­–ç•¥(å¦‚direct,proxy,è®¢é˜…åç§°,ä»£ç†åˆ†ç»„,èŠ‚ç‚¹),interval=æµ‹è¯•å‘¨æœŸ,timeout=è¶…æ—¶æ—¶é—´,tolerance=å…¬å·®,select=é»˜è®¤ç­–ç•¥(0è¡¨ç¤ºç¬¬ä¸€ä¸ªç­–ç•¥,1è¡¨ç¤ºç¬¬äºŒä¸ªç­–ç•¥,2è¡¨ç¤ºç¬¬ä¸‰ä¸ªç­–ç•¥â€¦â€¦),url=æµ‹è¯•åœ°å€
# å«æ­£åˆ™ç­›é€‰çš„ä»£ç†åˆ†ç»„ï¼Œç¤ºä¾‹ï¼š
# åç§°=ç±»å‹ (å¦‚select,url-test,fallback,load-balance,random),policy-regex-filter=æ­£åˆ™å¼æˆ–å…³é”®è¯ç­›é€‰,interval=æµ‹è¯•å‘¨æœŸ,timeout=è¶…æ—¶æ—¶é—´,tolerance=å…¬å·®,select=é»˜è®¤ç­–ç•¥(0è¡¨ç¤ºç¬¬ä¸€ä¸ªç­–ç•¥,1è¡¨ç¤ºç¬¬äºŒä¸ªç­–ç•¥,2è¡¨ç¤ºç¬¬ä¸‰ä¸ªç­–ç•¥â€¦â€¦),url=æµ‹è¯•åœ°å€
# å¼€å¯è®¢é˜…ç­›é€‰çš„ä»£ç†åˆ†ç»„ï¼Œç¤ºä¾‹ï¼š
# åç§°=ç±»å‹ (å¦‚select,url-test,fallback,load-balance,random),è®¢é˜…åç§°(å¤šä¸ªè®¢é˜…æ—¶,ç”¨é€—å·åˆ†éš”),use=true,policy-regex-filter=æ­£åˆ™å¼æˆ–å…³é”®è¯ç­›é€‰(çœç•¥è¯¥å‚æ•°æ—¶,è¡¨ç¤ºåŒ¹é…å¯¹åº”è®¢é˜…çš„å…¨éƒ¨èŠ‚ç‚¹),interval=æµ‹è¯•å‘¨æœŸ,timeout=è¶…æ—¶æ—¶é—´,tolerance=å…¬å·®,select=é»˜è®¤ç­–ç•¥(0è¡¨ç¤ºç¬¬ä¸€ä¸ªç­–ç•¥,1è¡¨ç¤ºç¬¬äºŒä¸ªç­–ç•¥,2è¡¨ç¤ºç¬¬ä¸‰ä¸ªç­–ç•¥â€¦â€¦),url=æµ‹è¯•åœ°å€
# ----------
ChatGPT = select,PROXY,é¦™æ¸¯èŠ‚ç‚¹,å°æ¹¾èŠ‚ç‚¹,æ—¥æœ¬èŠ‚ç‚¹,æ–°åŠ å¡èŠ‚ç‚¹,éŸ©å›½èŠ‚ç‚¹,ç¾å›½èŠ‚ç‚¹,interval=86400,timeout=5,select=0,url=http://www.gstatic.com/generate_204
YouTube = select,PROXY,é¦™æ¸¯èŠ‚ç‚¹,å°æ¹¾èŠ‚ç‚¹,æ—¥æœ¬èŠ‚ç‚¹,æ–°åŠ å¡èŠ‚ç‚¹,éŸ©å›½èŠ‚ç‚¹,ç¾å›½èŠ‚ç‚¹,interval=86400,timeout=5,select=0,url=http://www.gstatic.com/generate_204
Netflix = select,PROXY,é¦™æ¸¯èŠ‚ç‚¹,å°æ¹¾èŠ‚ç‚¹,æ—¥æœ¬èŠ‚ç‚¹,æ–°åŠ å¡èŠ‚ç‚¹,éŸ©å›½èŠ‚ç‚¹,ç¾å›½èŠ‚ç‚¹,interval=86400,timeout=5,select=0,url=http://www.gstatic.com/generate_204
Disney+ = select,PROXY,é¦™æ¸¯èŠ‚ç‚¹,å°æ¹¾èŠ‚ç‚¹,æ—¥æœ¬èŠ‚ç‚¹,æ–°åŠ å¡èŠ‚ç‚¹,éŸ©å›½èŠ‚ç‚¹,ç¾å›½èŠ‚ç‚¹,interval=86400,timeout=5,select=0,url=http://www.gstatic.com/generate_204
HBO = select,PROXY,é¦™æ¸¯èŠ‚ç‚¹,å°æ¹¾èŠ‚ç‚¹,æ—¥æœ¬èŠ‚ç‚¹,æ–°åŠ å¡èŠ‚ç‚¹,éŸ©å›½èŠ‚ç‚¹,ç¾å›½èŠ‚ç‚¹,interval=86400,timeout=5,select=0,url=http://www.gstatic.com/generate_204
TikTok = select,PROXY,é¦™æ¸¯èŠ‚ç‚¹,å°æ¹¾èŠ‚ç‚¹,æ—¥æœ¬èŠ‚ç‚¹,æ–°åŠ å¡èŠ‚ç‚¹,éŸ©å›½èŠ‚ç‚¹,ç¾å›½èŠ‚ç‚¹,interval=86400,timeout=5,select=0,url=http://www.gstatic.com/generate_204
Spotify = select,DIRECT,PROXY,é¦™æ¸¯èŠ‚ç‚¹,å°æ¹¾èŠ‚ç‚¹,æ—¥æœ¬èŠ‚ç‚¹,æ–°åŠ å¡èŠ‚ç‚¹,éŸ©å›½èŠ‚ç‚¹,ç¾å›½èŠ‚ç‚¹,interval=86400,timeout=5,select=1,url=http://www.gstatic.com/generate_204
Telegram = select,PROXY,é¦™æ¸¯èŠ‚ç‚¹,å°æ¹¾èŠ‚ç‚¹,æ—¥æœ¬èŠ‚ç‚¹,æ–°åŠ å¡èŠ‚ç‚¹,éŸ©å›½èŠ‚ç‚¹,ç¾å›½èŠ‚ç‚¹,interval=86400,timeout=5,select=0,url=http://www.gstatic.com/generate_204
Twitter = select,PROXY,é¦™æ¸¯èŠ‚ç‚¹,å°æ¹¾èŠ‚ç‚¹,æ—¥æœ¬èŠ‚ç‚¹,æ–°åŠ å¡èŠ‚ç‚¹,éŸ©å›½èŠ‚ç‚¹,ç¾å›½èŠ‚ç‚¹,interval=86400,timeout=5,select=0,url=http://www.gstatic.com/generate_204
Facebook = select,PROXY,é¦™æ¸¯èŠ‚ç‚¹,å°æ¹¾èŠ‚ç‚¹,æ—¥æœ¬èŠ‚ç‚¹,æ–°åŠ å¡èŠ‚ç‚¹,éŸ©å›½èŠ‚ç‚¹,ç¾å›½èŠ‚ç‚¹,interval=86400,timeout=5,select=0,url=http://www.gstatic.com/generate_204
PayPal = select,PROXY,DIRECT,é¦™æ¸¯èŠ‚ç‚¹,å°æ¹¾èŠ‚ç‚¹,æ—¥æœ¬èŠ‚ç‚¹,æ–°åŠ å¡èŠ‚ç‚¹,éŸ©å›½èŠ‚ç‚¹,ç¾å›½èŠ‚ç‚¹,interval=86400,timeout=5,select=1,url=http://www.gstatic.com/generate_204
Amazon = select,DIRECT,PROXY,é¦™æ¸¯èŠ‚ç‚¹,å°æ¹¾èŠ‚ç‚¹,æ—¥æœ¬èŠ‚ç‚¹,æ–°åŠ å¡èŠ‚ç‚¹,éŸ©å›½èŠ‚ç‚¹,ç¾å›½èŠ‚ç‚¹,interval=86400,timeout=5,select=1,url=http://www.gstatic.com/generate_204
è‹¹æœæœåŠ¡ = select,DIRECT,PROXY,é¦™æ¸¯èŠ‚ç‚¹,å°æ¹¾èŠ‚ç‚¹,æ—¥æœ¬èŠ‚ç‚¹,æ–°åŠ å¡èŠ‚ç‚¹,éŸ©å›½èŠ‚ç‚¹,ç¾å›½èŠ‚ç‚¹,interval=86400,timeout=5,select=0,url=http://www.gstatic.com/generate_204
è°·æ­ŒæœåŠ¡ = select,PROXY,é¦™æ¸¯èŠ‚ç‚¹,å°æ¹¾èŠ‚ç‚¹,æ—¥æœ¬èŠ‚ç‚¹,æ–°åŠ å¡èŠ‚ç‚¹,éŸ©å›½èŠ‚ç‚¹,ç¾å›½èŠ‚ç‚¹,interval=86400,timeout=5,select=0,url=http://www.gstatic.com/generate_204
å¾®è½¯æœåŠ¡ = select,PROXY,DIRECT,é¦™æ¸¯èŠ‚ç‚¹,å°æ¹¾èŠ‚ç‚¹,æ—¥æœ¬èŠ‚ç‚¹,æ–°åŠ å¡èŠ‚ç‚¹,éŸ©å›½èŠ‚ç‚¹,ç¾å›½èŠ‚ç‚¹,interval=86400,timeout=5,select=0,url=http://www.gstatic.com/generate_204
å“”å“©å“”å“© = select,DIRECT,PROXY,é¦™æ¸¯èŠ‚ç‚¹,å°æ¹¾èŠ‚ç‚¹,interval=86400,timeout=5,select=0,url=http://www.gstatic.com/generate_204
æ¸¸æˆå¹³å° = select,DIRECT,PROXY,é¦™æ¸¯èŠ‚ç‚¹,å°æ¹¾èŠ‚ç‚¹,æ—¥æœ¬èŠ‚ç‚¹,æ–°åŠ å¡èŠ‚ç‚¹,éŸ©å›½èŠ‚ç‚¹,ç¾å›½èŠ‚ç‚¹,interval=86400,timeout=5,select=0,url=http://www.gstatic.com/generate_204
é¦™æ¸¯èŠ‚ç‚¹ = url-test,url=http://www.gstatic.com/generate_204,interval=600,tolerance=0,timeout=5,select=0,policy-regex-filter=^(?=.*((?i))ğŸ‡­ğŸ‡°|é¦™|é¦™æ¸¯|æ·±æ¸¯|æ²ªæ¸¯|äº¬æ¸¯|((?i)\b(HK|Hong)\b))(?!.*(ç¾|æ¾³|å°|æ—¥|éŸ©|æ–°|å›å›½|æ ¡å›­|æ¸¸æˆ|ğŸ®|((?i)\b(Game)\b))).*$
å°æ¹¾èŠ‚ç‚¹ = url-test,url=http://www.gstatic.com/generate_204,interval=600,tolerance=0,timeout=5,select=0,policy-regex-filter=^(?=.*((?i))ğŸ‡¹ğŸ‡¼|å°|å°æ¹¾|å°åŒ—|å°ä¸­|æ–°åŒ—|å½°åŒ–|((?i)\b(TW|Tai|Taiwan)\b))(?!.*(æ¸¯|æ¾³|ç¾|æ—¥|éŸ©|æ–°|å›å›½|æ ¡å›­|æ¸¸æˆ|ğŸ®|((?i)\b(Game)\b))).*$
ç¾å›½èŠ‚ç‚¹ = url-test,url=http://www.gstatic.com/generate_204,interval=600,tolerance=0,timeout=5,select=0,policy-regex-filter=^(?=.*((?i))ğŸ‡ºğŸ‡¸|ç¾|ç¾å›½|çº½çº¦|ç¡…è°·|æ²ªç¾|æ´›æ‰çŸ¶|å‡¤å‡°åŸ|è¥¿é›…å›¾|èŠåŠ å“¥|æ³¢ç‰¹å…°|è¾¾æ‹‰æ–¯|ä¿„å‹’å†ˆ|è´¹åˆ©è’™|åœ£ä½•å¡|æ—§é‡‘å±±|é˜¿æ‹‰æ–¯åŠ |åœ£å…‹æ‹‰æ‹‰|æ‹‰æ–¯ç»´åŠ æ–¯|((?i)\b(US|USA|United|States|America)\b))(?!.*(æ¸¯|æ¾³|å°|æ—¥|éŸ©|æ–°|å›å›½|æ ¡å›­|æ¸¸æˆ|ğŸ®|((?i)\b(Game)\b))).*$
æ—¥æœ¬èŠ‚ç‚¹ = url-test,url=http://www.gstatic.com/generate_204,interval=600,tolerance=0,timeout=5,select=0,policy-regex-filter=^(?=.*((?i))ğŸ‡¯ğŸ‡µ|æ—¥|æ—¥æœ¬|ä¸œäº¬|å¤§é˜ª|äº¬æ—¥|è‹æ—¥|æ²ªæ—¥|ä¸Šæ—¥|å·æ—¥|æ·±æ—¥|å¹¿æ—¥|((?i)\b(JP|Japan|Tokyo)\b))(?!.*(æ¸¯|æ¾³|å°|ç¾|éŸ©|æ–°|å›å›½|æ ¡å›­|æ¸¸æˆ|ğŸ®|((?i)\b(Game)\b))).*$
éŸ©å›½èŠ‚ç‚¹ = url-test,url=http://www.gstatic.com/generate_204,interval=600,tolerance=0,timeout=5,select=0,policy-regex-filter=^(?=.*((?i))ğŸ‡°ğŸ‡·|éŸ©|éŸ“|éŸ©å›½|é¦–å°”|æ˜¥å·|((?i)\b(KR|KOR|Korea)\b))(?!.*(æ¸¯|æ¾³|å°|æ—¥|ç¾|æ–°|å›å›½|æ ¡å›­|æ¸¸æˆ|ğŸ®|((?i)\b(Game)\b))).*$
æ–°åŠ å¡èŠ‚ç‚¹ = url-test,url=http://www.gstatic.com/generate_204,interval=600,tolerance=0,timeout=5,select=0,policy-regex-filter=^(?=.*((?i))ğŸ‡¸ğŸ‡¬|æ–°|ç‹®|ç…|æ–°åŠ å¡|æ²ªæ–°|äº¬æ–°|æ·±æ–°|æ­æ–°|å¹¿æ–°|((?i)\b(SG|Sing|Singapore)\b))(?!.*(æ¸¯|æ¾³|å°|æ—¥|éŸ©|ç¾|å›å›½|æ ¡å›­|æ¸¸æˆ|ğŸ®|((?i)\b(Game)\b))).*$

[Rule]
# è§„åˆ™ç±»å‹ï¼š
# DOMAIN-SUFFIXï¼šåŒ¹é…è¯·æ±‚åŸŸåçš„åç¼€ã€‚å¦‚ â€œDOMAIN-SUFFIX,example.com,DIRECTâ€ å¯ä»¥åŒ¹é…åˆ° â€œa.example.comã€a.b.example.comâ€ã€‚
# DOMAIN-KEYWORDï¼šåŒ¹é…è¯·æ±‚åŸŸåçš„å…³é”®è¯ã€‚å¦‚ â€œDOMAIN-KEYWORD,exa,DIRECTâ€ å¯ä»¥åŒ¹é…åˆ° â€œa.example.comã€a.b.example.comâ€ã€‚
# DOMAINï¼šåŒ¹é…è¯·æ±‚çš„å®Œæ•´åŸŸåã€‚å¦‚ â€œDOMAIN,www.example.com,DIRECTâ€ åªèƒ½åŒ¹é…åˆ° â€œwww.example.comâ€ã€‚
# USER-AGENTï¼šåŒ¹é…ç”¨æˆ·ä»£ç†å­—ç¬¦ä¸²ï¼Œæ”¯æŒä½¿ç”¨é€šé…ç¬¦ â€œ*â€ã€‚å¦‚ â€œUSER-AGENT,MicroMessenger*,DIRECTâ€ å¯ä»¥åŒ¹é…åˆ° â€œMicroMessenger Clientâ€ã€‚
# URL-REGEXï¼šåŒ¹é… URL æ­£åˆ™å¼ã€‚å¦‚ â€œURL-REGEX,^https?://.+/item.+,REJECTâ€ å¯ä»¥åŒ¹é…åˆ° â€œhttps://www.example.com/item/abc/123â€ã€‚
# IP-CIDRï¼šåŒ¹é… IPv4 æˆ– IPv6 åœ°å€ã€‚å¦‚ â€œIP-CIDR,192.168.1.0/24,DIRECTâ€ å¯ä»¥åŒ¹é…åˆ° IP æ®µ â€œ192.168.1.1ï½192.168.1.254â€ã€‚å½“åŸŸåè¯·æ±‚é‡åˆ° IP ç±»è§„åˆ™æ—¶ï¼ŒShadowrocket ä¼šå‘æœ¬åœ° DNS æœåŠ¡å™¨å‘é€æŸ¥è¯¢è¯·æ±‚ï¼Œä»¥åˆ¤æ–­ä¸»æœº IP æ˜¯å¦åŒ¹é…è§„åˆ™ã€‚è‹¥ IP ç±»è§„åˆ™åŠ  â€œno-resolveâ€ (å¦‚ï¼šIP-CIDR,172.16.0.0/12,DIRECT,no-resolve)ï¼Œåˆ™åŸŸåè¯·æ±‚å°†ä¼šè·³è¿‡æ­¤è§„åˆ™ï¼Œä¸ä¼šè§¦å‘æœ¬åœ° DNS æŸ¥è¯¢ã€‚
# IP-ASNï¼šåŒ¹é… IP åœ°å€éš¶å±çš„ ASN ç¼–å·ã€‚å¦‚ "IP-ASN,56040,DIRECT" å¯ä»¥åŒ¹é…åˆ°å±äº China Mobile Communications Corporation ç½‘ç»œçš„ IP åœ°å€ã€‚
# RULE-SETï¼šåŒ¹é…è§„åˆ™é›†å†…å®¹ã€‚è§„åˆ™é›†çš„ç»„æˆéƒ¨åˆ†éœ€åŒ…å«è§„åˆ™ç±»å‹ã€‚
# DOMAIN-SETï¼šåŒ¹é…åŸŸåé›†å†…å®¹ã€‚åŸŸåé›†çš„ç»„æˆéƒ¨åˆ†ä¸åŒ…å«è§„åˆ™ç±»å‹ã€‚
# SCRIPTï¼šåŒ¹é…è„šæœ¬åç§°ã€‚
# DST-PORTï¼šåŒ¹é…ç›®æ ‡ä¸»æœºåçš„ç«¯å£å·ã€‚å¦‚ â€œDST-PORT,443,DIRECTâ€ å¯ä»¥åŒ¹é…åˆ° 443 ç›®æ ‡ç«¯å£ã€‚
# GEOIPï¼šåŒ¹é… IP æ•°æ®åº“ã€‚å¦‚ â€œGEOIP,CN,DIRECTâ€ å¯ä»¥åŒ¹é…åˆ°å½’å±åœ°ä¸º CN çš„ IP åœ°å€ã€‚
# FINALï¼šå…œåº•ç­–ç•¥ã€‚å¦‚ â€œFINAL,PROXYâ€ è¡¨ç¤ºå½“å…¶ä»–æ‰€æœ‰è§„åˆ™éƒ½åŒ¹é…ä¸åˆ°æ—¶æ‰ä½¿ç”¨ FINAL è§„åˆ™çš„ç­–ç•¥ã€‚
# ANDï¼šé€»è¾‘è§„åˆ™ï¼Œä¸è§„åˆ™ã€‚å¦‚ â€œAND,((DOMAIN,www.example.com),(DST-PORT,123)),DIRECTâ€ å¯ä»¥åŒ¹é…åˆ° â€œwww.example.com:123â€ã€‚
# NOTï¼šé€»è¾‘è§„åˆ™ï¼Œéè§„åˆ™ã€‚å¦‚ â€œNOT,((DST-PORT,123)),DIRECTâ€ å¯ä»¥åŒ¹é…åˆ°é™¤äº† â€œ123â€ ç«¯å£çš„å…¶ä»–æ‰€æœ‰è¯·æ±‚ã€‚
# ORï¼šé€»è¾‘è§„åˆ™ï¼Œæˆ–è§„åˆ™ã€‚å¦‚ â€œOR,((DST-PORT,123),(DST-PORT,456)),DIRECTâ€ å¯ä»¥åŒ¹é…åˆ° â€œ123â€ æˆ– â€œ456â€ ç«¯å£çš„æ‰€æœ‰è¯·æ±‚ã€‚
# ----------
# è§„åˆ™ç­–ç•¥ï¼š
# PROXYï¼šä»£ç†ã€‚é€šè¿‡ä»£ç†æœåŠ¡å™¨è½¬å‘æµé‡ã€‚
# DIRECTï¼šç›´è¿ã€‚è¿æ¥ä¸ç»è¿‡ä»»ä½•ä»£ç†æœåŠ¡å™¨ã€‚
# REJECTï¼šæ‹’ç»ã€‚è¿”å› HTTP çŠ¶æ€ç  404ï¼Œæ²¡æœ‰å†…å®¹ã€‚
# REJECT-DICTï¼šæ‹’ç»ã€‚è¿”å› HTTP çŠ¶æ€ç  200ï¼Œå†…å®¹ä¸ºç©ºçš„ JSON å¯¹è±¡ã€‚
# REJECT-ARRAYï¼šæ‹’ç»ã€‚è¿”å› HTTP çŠ¶æ€ç  200ï¼Œå†…å®¹ä¸ºç©ºçš„ JSON æ•°ç»„ã€‚
# REJECT-200ï¼šæ‹’ç»ã€‚è¿”å› HTTP çŠ¶æ€ç  200ï¼Œæ²¡æœ‰å†…å®¹ã€‚
# REJECT-IMGï¼šæ‹’ç»ã€‚è¿”å› HTTP çŠ¶æ€ç  200ï¼Œå†…å®¹ä¸º 1 åƒç´  GIFã€‚
# REJECT-TINYGIFï¼šæ‹’ç»ã€‚è¿”å› HTTP çŠ¶æ€ç  200ï¼Œå†…å®¹ä¸º 1 åƒç´  GIFã€‚
# REJECT-DROPï¼šæ‹’ç»ã€‚ä¸¢å¼ƒ IP åŒ…ã€‚
# REJECT-NO-DROPï¼šæ‹’ç»ã€‚è¿”å› ICMP ç«¯å£ä¸å¯è¾¾ã€‚
# é™¤æ­¤ä¹‹å¤–ï¼Œè§„åˆ™ç­–ç•¥è¿˜å¯ä»¥é€‰æ‹©ã€Œä»£ç†åˆ†ç»„ã€ã€ã€Œè®¢é˜…åç§°ã€ã€ã€Œåˆ†ç»„ã€ã€ã€ŒèŠ‚ç‚¹ã€ã€‚
# ----------
# è§„åˆ™åŒ¹é…çš„ä¼˜å…ˆçº§ï¼š
# 1.è§„åˆ™ä»ä¸Šåˆ°ä¸‹ä¾æ¬¡åŒ¹é…ã€‚
# 2.åŸŸåè§„åˆ™ä¼˜å…ˆäº IP è§„åˆ™ã€‚
# ----------
# å…³äºå±è”½ 443 ç«¯å£çš„ UDP æµé‡çš„è§£é‡Šå†…å®¹ï¼šHTTP3/QUIC åè®®å¼€å§‹æµè¡Œï¼Œä½†æ˜¯å›½å†… ISP å’Œå›½é™…å‡ºå£çš„ UDP ä¼˜å…ˆçº§éƒ½å¾ˆä½ï¼Œè¡¨ç°å¾ˆå·®ï¼Œå±è”½æ‰ä»¥å¼ºåˆ¶å›é€€ HTTP2/HTTP1.1ã€‚ï¼ˆå¦‚éœ€å¯ç”¨è¯¥é€»è¾‘è§„åˆ™ï¼Œè¯·åˆ é™¤ AND å‰é¢çš„æ³¨é‡Šç¬¦å· #ï¼‰
# AND,((PROTOCOL,UDP),(DST-PORT,443)),REJECT-NO-DROP
# ----------
# ç›´è¿ç­–ç•¥çš„ä¿®æ­£è§„åˆ™é›†ã€‚
RULE-SET,https://raw.githubusercontent.com/wlxuf/add_rule/main/direct-amend.list,DIRECT
# ä»£ç†ç­–ç•¥çš„ä¿®æ­£è§„åˆ™é›†ã€‚
RULE-SET,https://raw.githubusercontent.com/wlxuf/add_rule/main/proxy-amend.list,PROXY
# å›½å¤–å¸¸ç”¨æœåŠ¡å•ç‹¬åˆ†æµï¼šYouTubeï¼ŒNetflixï¼ŒDisney+ï¼ŒHBOï¼ŒSpotifyï¼ŒTelegramï¼ŒPayPalï¼ŒTwitterï¼ŒFacebookï¼ŒGoogleï¼ŒTikTokï¼ŒGitHubï¼ŒChatGPTï¼ŒTVBã€‚
# å›½å†…å¸¸ç”¨æœåŠ¡å•ç‹¬åˆ†æµï¼šè‹¹æœæœåŠ¡ï¼Œå¾®è½¯æœåŠ¡ï¼Œå“”å“©å“”å“©ï¼Œç½‘æ˜“äº‘éŸ³ä¹ï¼Œæ¸¸æˆå¹³å°ï¼Œäºšé©¬é€Šï¼Œç™¾åº¦ï¼Œè±†ç“£ï¼Œå¾®ä¿¡ï¼ŒæŠ–éŸ³ï¼Œæ–°æµªï¼ŒçŸ¥ä¹ï¼Œå°çº¢ä¹¦ã€‚
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/AppleNews/AppleNews.list,PROXY
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/Apple/Apple.list,è‹¹æœæœåŠ¡
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/BiliBili/BiliBili.list,å“”å“©å“”å“©
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/NetEaseMusic/NetEaseMusic.list,DIRECT
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Baidu/Baidu.list,DIRECT
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/DouBan/DouBan.list,DIRECT
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/WeChat/WeChat.list,DIRECT
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/DouYin/DouYin.list,DIRECT
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Sina/Sina.list,DIRECT
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Zhihu/Zhihu.list,DIRECT
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/XiaoHongShu/XiaoHongShu.list,DIRECT
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/YouTube/YouTube.list,YOUTUBE
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Netflix/Netflix.list,NETFLIX
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Disney/Disney.list,DISNEY+
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/HBO/HBO.list,HBO
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Spotify/Spotify.list,SPOTIFY
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Telegram/Telegram.list,TELEGRAM
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/PayPal/PayPal.list,PAYPAL
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Twitter/Twitter.list,TWITTER
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Facebook/Facebook.list,FACEBOOK
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Amazon/Amazon.list,AMAZON
RULE-SET,https://raw.githubusercontent.com/wlxuf/add_rule/main/ChatGPT.list,CHATGPT
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Sony/Sony.list,æ¸¸æˆå¹³å°
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Nintendo/Nintendo.list,æ¸¸æˆå¹³å°
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Epic/Epic.list,æ¸¸æˆå¹³å°
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/SteamCN/SteamCN.list,æ¸¸æˆå¹³å°
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Steam/Steam.list,æ¸¸æˆå¹³å°
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Game/Game.list,æ¸¸æˆå¹³å°
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/GitHub/GitHub.list,PROXY
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Microsoft/Microsoft.list,å¾®è½¯æœåŠ¡
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Google/Google.list,è°·æ­ŒæœåŠ¡
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/TikTok/TikTok.list,TIKTOK
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/TVB/TVB.list,PROXY
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/Global/Global.list,PROXY
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/China/China.list,DIRECT
# æœ¬åœ°å±€åŸŸç½‘åœ°å€çš„è§„åˆ™é›†ã€‚
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Shadowrocket/Lan/Lan.list,DIRECT
# è¡¨ç¤º CN åœ°åŒºçš„ IP åˆ†æµèµ°ç›´è¿ï¼ŒGEOIP æ•°æ®åº“ç”¨æ¥åˆ¤æ–­ IP æ˜¯å¦å±äº CN åœ°åŒºã€‚é»˜è®¤ä½¿ç”¨ Shadowrocket è‡ªå¸¦çš„ GEOIP æ•°æ®åº“ï¼Œå¦‚æœæ‚¨æƒ³æ›¿æ¢å…¶ä»–æ•°æ®åº“ï¼Œå¯åœ¨ è®¾ç½® - GeoLite2 æ•°æ®åº“ é‡Œæ·»åŠ å’Œä¿®æ”¹ã€‚
GEOIP,CN,DIRECT
# è¡¨ç¤ºå½“å…¶ä»–æ‰€æœ‰è§„åˆ™éƒ½åŒ¹é…ä¸åˆ°æ—¶æ‰ä½¿ç”¨ FINAL è§„åˆ™çš„ç­–ç•¥ã€‚
FINAL,PROXY

[Host]
# åŸŸåæŒ‡å®šæœ¬åœ°å€¼ï¼š
# example.com = 1.2.3.4
# åŸŸåæŒ‡å®š DNS æœåŠ¡å™¨ï¼š
# example.com = server:1.2.3.4
# wifi åç§°æŒ‡å®š DNS æœåŠ¡å™¨ï¼Œå¦‚éœ€æŒ‡å®šå¤šä¸ª DNSï¼Œå¯ç”¨é€—å·åˆ†éš”ï¼š
# ssid:wifi åç§° = server:1.2.3.4
# ----------
*.apple.com = server:system
*.cdn-apple.com = server:system
*.icloud.com = server:system
localhost = 127.0.0.1

[URL Rewrite]
# Google æœç´¢å¼•æ“é˜²è·³è½¬çš„é‡å†™ã€‚
^https?://(www.)?g.cn https://www.google.com 302
^https?://(www.)?google.cn https://www.google.com 302

[MITM]
# Shadowrocket ä»…ä¼šè§£å¯† hostname æŒ‡å®šçš„åŸŸåçš„è¯·æ±‚ï¼Œå¯ä»¥ä½¿ç”¨é€šé…ç¬¦ã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨å‰ç¼€ - æ’é™¤ç‰¹å®šä¸»æœºåï¼Œå¦‚ -*.example.comã€‚iOS ç³»ç»Ÿå’ŒæŸäº›åº”ç”¨æœ‰ä¸¥æ ¼çš„å®‰å…¨ç­–ç•¥ï¼Œä»…ä¿¡ä»»æŸäº›ç‰¹å®šçš„è¯ä¹¦ï¼Œå¯¹è¿™äº›åŸŸåå¯åŠ¨è§£å¯†å¯èƒ½å¯¼è‡´é—®é¢˜ï¼Œå¦‚ *.apple.comï¼Œ*.icloud.comã€‚
hostname = *.google.cn
